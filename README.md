# Xrayshaper

–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π fair-use –ª–∏–º–∏—Ç–µ—Ä-—à–µ–π–ø–µ—Ä —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º 95-–≥–æ –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—è (–¥–ª—è —à–∏—Ä–æ–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ –±—ã—Ç—É –∏ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –¥–ª—è Xray/V2Ray –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞)
##### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ö–æ–¥—è—â–µ–≥–æ –∏ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ —Å—Ä–µ–¥–Ω–µ–º—É –∑–Ω–∞—á–µ–Ω–∏—é - –¥–ª—è —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö fair-use VDS/VPS —Ö–æ—Å—Ç–µ—Ä–æ–≤. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É –∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –º–µ–∂–¥—É –≤—Å–µ–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏, –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—è—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å –∫–æ–Ω–µ—á–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

![Xrayshaper](screenshot.png)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
curl -sL https://raw.githubusercontent.com/hydraponique/xrayshaper/main/xrayshaper.sh | sudo bash
```

## üî• –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **üìä –ö–æ–Ω—Ç—Ä–æ–ª—å 95-–≥–æ –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—è** - —Ç–æ—á–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ HTB
- **‚öñÔ∏è –ß–µ—Å—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** - FQ-CoDel –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ–∂–¥—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
- **üîÅ –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ (upload) –∏ –≤—Ö–æ–¥—è—â–µ–≥–æ (download) —Ç—Ä–∞—Ñ–∏–∫–∞
- **üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞** - SSH, DNS, NTP, ICMP –∏ TCP ACK –ø–∞–∫–µ—Ç—ã –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è
- **ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **üîß Systemd –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ systemd

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
sudo xrayshaper             # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
sudo xrayshaper on          # –í–∫–ª—é—á–∏—Ç—å —à–µ–π–ø–∏–Ω–≥
sudo xrayshaper off         # –í—ã–∫–ª—é—á–∏—Ç—å —à–µ–π–ø–∏–Ω–≥  
sudo xrayshaper status      # –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
sudo xrayshaper reinstall   # –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞
```
### –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –¢–∏–ø —Ç—Ä–∞—Ñ–∏–∫–∞ | –ü–æ—Ä—Ç/–ü—Ä–æ—Ç–æ–∫–æ–ª |
|-----------|-------------|----------------|
| üü¢ –í—ã—Å–æ–∫–∏–π | –°–∏—Å—Ç–µ–º–Ω—ã–π | SSH (22), DNS (53/853), NTP (123), ICMP |
| üü¢ –í—ã—Å–æ–∫–∏–π | –°–µ—Ç–µ–≤–æ–π | TCP ACK –ø–∞–∫–µ—Ç—ã, –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ |
| üü° –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π | –í–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫ (–≤–∫–ª—é—á–∞—è Xray) |

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- **HTB (Hierarchical Token Bucket)** - —Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏
- **FQ-CoDel (Fair Queuing Controlled Delay)** - —á–µ—Å—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ low latency
- **IFB (Intermediate Functional Block)** - –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- **iptables** - –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞
- **tc (traffic control)** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **Ubuntu 18.04+/Debian 10+** (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å –Ω–∞ Ubuntu 24.04.3 LTS –∏ Debian 12.11 Bookworm)
- **Linux kernel ‚â• 5.15**

–í—Å–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—ã—á–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Debian-based GNU/Linux:
- iproute2 ‚â• 6.0
- iptables
- systemd
- ifb - –º–æ–¥—É–ª—å —è–¥—Ä–∞ Linux –∏–∑ –ø–∞–∫–µ—Ç–∞ linux-modules-extra
